# Analysis Report - ASM-first Traversal Feasibility

Date: 2026-02-03
Machine: VLIW/SIMD simulator (problem.py), VLEN=8
Command used:
`python analyze_frontier_stats.py --sims 5000 --forest-height 10 --rounds 16 --batch-size 256 --seed 123 --hist-limit 40`

Notes:
- Forest is fixed across all simulations.
- Inputs generated with the same RNG pattern as the harness.
- Hash function is bit-exact with problem.py (inlined for speed).

## RAW OUTPUT (verbatim)

```
PHASE A: Frontier stats
PHASE A: Frontier stats
depth | occ | U_idx avg(min..max) | collision% avg | max_bucket | U_child avg | top_idx_counts | uniq_per_vec_hist
    0 | 10000 |    1.0 (1..1) |  99.61% |       256 |        2.0 | 0:2560000 | 1:320000
    1 | 10000 |    2.0 (2..2) |  99.22% |       158 |        4.0 | 1:1280665 2:1279335 | 1:2536 2:317464
    2 | 10000 |    4.0 (4..4) |  98.44% |        95 |        8.0 | 4:640698 5:640312 3:639967 6:639023 | 1:21 2:7471 3:113326 4:199182
    3 | 10000 |    8.0 (8..8) |  96.88% |        54 |       16.0 | 12:320944 9:320634 8:320238 10:320064 7:319729 14:319602 13:319421 11:319368 | 2:133 3:6204 4:54346 5:134822 6:102187 7:21515 8:793
    4 | 10000 |   16.0 (16..16) |  93.75% |        36 |       32.0 | 26:160650 20:160562 17:160369 25:160294 16:160129 30:160104 19:160072 22:160062 21:160002 28:159875 | 2:4 3:236 4:5560 5:40883 6:114818 7:119983 8:38516
    5 | 5000 |   32.0 (30..32) |  87.50% |        24 |       64.0 | 54:40385 36:40318 43:40254 55:40184 31:40177 35:40169 61:40159 52:40128 47:40116 51:40116 | 3:4 4:222 5:3699 6:25192 7:69223 8:61660
    6 | 5000 |   62.9 (57..64) |  75.45% |        16 |      125.7 | 110:20365 73:20269 88:20268 95:20234 82:20225 124:20198 76:20195 64:20164 83:20149 106:20147 | 4:16 5:530 6:8339 7:49317 8:101798
    7 | 5000 |  110.9 (99..122) |  56.69% |        12 |      221.7 | 221:10296 177:10204 190:10203 168:10193 214:10188 148:10172 154:10165 249:10160 192:10158 144:10147 | 4:1 5:76 6:2351 7:29535 8:128037
    8 | 5000 |  162.0 (143..179) |  36.70% |        10 |      324.1 | 382:5165 444:5165 297:5163 400:5163 338:5157 443:5131 332:5130 502:5126 446:5121 406:5119 | 5:10 6:616 7:16051 8:143323
    9 | 5000 |  201.6 (182..220) |  21.25% |         7 |      403.2 | 1005:2633 890:2628 1002:2623 754:2622 678:2616 666:2611 772:2610 595:2608 988:2603 888:2601 | 5:2 6:159 7:8444 8:151395
   10 | 5000 |  226.6 (210..243) |  11.48% |         6 |        1.0 | 1357:1368 1428:1355 1906:1339 1077:1337 1803:1335 1782:1333 1652:1332 1334:1331 1269:1329 1071:1329 | 6:36 7:4320 8:155644

PHASE A: Bucket size histograms
depth 0: 256:10000
depth 1: 98:2 99:2 100:1 101:6 102:7 103:7 104:10 105:11 106:15 107:26 108:50 109:55 110:84 111:128 112:129 113:179 114:217 115:233 116:320 117:422 118:433 119:519 120:624 121:626 122:752 123:842 124:881 125:911 126:1026 127:1016 128:932 129:1016 130:1026 131:911 132:881 133:842 134:752 135:626 136:624 137:519 ...(+21 more)
depth 2: 37:1 38:1 40:7 41:6 42:14 43:16 44:21 45:44 46:65 47:94 48:143 49:215 50:306 51:386 52:536 53:710 54:821 55:1039 56:1235 57:1424 58:1556 59:1768 60:1975 61:2111 62:2166 63:2352 64:2299 65:2285 66:2184 67:1993 68:1948 69:1823 70:1509 71:1435 72:1112 73:908 74:794 75:617 76:530 77:413 ...(+16 more)
depth 3: 12:2 13:4 14:12 15:16 16:38 17:72 18:153 19:222 20:398 21:652 22:1014 23:1443 24:1944 25:2592 26:3230 27:4144 28:4686 29:5340 30:5659 31:6044 32:5954 33:5972 34:5496 35:4991 36:4335 37:3745 38:3006 39:2360 40:1872 41:1401 42:986 43:733 44:528 45:351 46:219 47:153 48:107 49:52 50:37 51:20 ...(+3 more)
depth 4: 1:1 2:1 3:13 4:46 5:140 6:361 7:805 8:1701 9:3148 10:5112 11:7696 12:10526 13:13142 14:15383 15:16025 16:16352 17:15418 18:13647 19:11493 20:9096 21:6759 22:4837 23:3230 24:2069 25:1254 26:799 27:422 28:262 29:138 30:61 31:30 32:21 33:7 34:3 35:1 36:1
depth 5: 1:390 2:1637 3:4284 4:9016 5:14532 6:19523 7:22857 8:22585 9:20018 10:16190 11:11542 12:7551 13:4683 14:2600 15:1410 16:639 17:306 18:98 19:51 20:25 21:3 22:6 24:1
depth 6: 1:23078 2:46341 3:63140 4:62793 5:50465 6:33588 7:18960 8:9454 9:4053 10:1578 11:580 12:164 13:47 14:14 15:1 16:1
depth 7: 1:173507 2:174048 3:115802 4:57694 5:22863 6:7717 7:2073 8:500 9:91 10:20 11:4 12:2
depth 8: 1:472266 2:235530 3:78307 4:19578 5:3855 6:581 7:83 8:10 9:1 10:1
depth 9: 1:777655 2:193638 3:32322 4:3986 5:387 6:35 7:2
depth 10: 1:997628 2:124454 3:10286 4:610 5:32 6:1

PHASE B: Value duplication stats
depth | U_val avg(min..max) | dup_ratio_val avg | top_values
    0 |    1.0 (1..1) |   0.00% | 112449971:2560000
    1 |    2.0 (2..2) |   0.00% | 574832345:1280665 187231959:1279335
    2 |    4.0 (4..4) |   0.00% | 572419961:640698 231284485:640312 874545027:639967 81934378:639023
    3 |    8.0 (8..8) |   0.00% | 290033686:320944 731858619:320634 713389124:320238 111457957:320064 814163306:319729
    4 |   16.0 (16..16) |   0.00% | 94247590:160650 810878616:160562 3587482:160369 219122189:160294 351708110:160129
    5 |   32.0 (30..32) |   0.00% | 719193396:40385 78905723:40318 855209915:40254 723521927:40184 626638978:40177
    6 |   62.9 (57..64) |   0.00% | 351883645:20365 1038977242:20269 932584685:20268 178038239:20234 979983380:20225
    7 |  110.9 (99..122) |   0.00% | 533463517:10296 481358047:10204 465132796:10203 290868034:10193 999756957:10188
    8 |  162.0 (143..179) |   0.00% | 491564707:5165 558309039:5165 89854357:5163 751308540:5163 203703296:5157
    9 |  201.6 (182..220) |   0.00% | 106261389:2633 492997905:2628 285346605:2623 576012560:2622 843056645:2616
   10 |  226.6 (210..243) |   0.00% | 466847250:1368 939132400:1355 1032806543:1339 510812510:1337 51129616:1335

PHASE C: Forest pattern stats
patterns_total: 1023
patterns_unique: 1023
patterns_dup_ratio: 0.00%
patterns_entropy_bits: 9.999
top20 patterns (parent,left,right -> count):
  (112449971, 574832345, 187231959) -> 1
  (574832345, 874545027, 572419961) -> 1
  (187231959, 231284485, 81934378) -> 1
  (874545027, 814163306, 713389124) -> 1
  (572419961, 731858619, 111457957) -> 1
  (231284485, 342872396, 290033686) -> 1
  (81934378, 724167262, 716822294) -> 1
  (814163306, 526484294, 351708110) -> 1
  (713389124, 3587482, 936895120) -> 1
  (731858619, 188148545, 810878616) -> 1
  (111457957, 150059639, 14162743) -> 1
  (342872396, 677442978, 962763545) -> 1
  (290033686, 219122189, 94247590) -> 1
  (724167262, 199210380, 305318639) -> 1
  (716822294, 271119160, 45603906) -> 1
  (526484294, 626638978, 924787169) -> 1
  (351708110, 1024185170, 569774018) -> 1
  (3587482, 1007798342, 78905723) -> 1
  (936895120, 655191103, 737579368) -> 1
  (188148545, 1037151418, 444233760) -> 1
top10 parent-left pairs:
  (112449971, 574832345) -> 1
  (574832345, 874545027) -> 1
  (187231959, 231284485) -> 1
  (874545027, 814163306) -> 1
  (572419961, 731858619) -> 1
  (231284485, 342872396) -> 1
  (81934378, 724167262) -> 1
  (814163306, 526484294) -> 1
  (713389124, 3587482) -> 1
  (731858619, 188148545) -> 1
top10 parent-right pairs:
  (112449971, 187231959) -> 1
  (574832345, 572419961) -> 1
  (187231959, 81934378) -> 1
  (874545027, 713389124) -> 1
  (572419961, 111457957) -> 1
  (231284485, 290033686) -> 1
  (81934378, 716822294) -> 1
  (814163306, 351708110) -> 1
  (713389124, 936895120) -> 1
  (731858619, 810878616) -> 1

PHASE D: Cache simulation (LRU and TopK by depth)
depth | K | loads_total | loads_avoided_lru | loads_avoided_topk
    0 |  4 |       10000 |              9999 |              10000
    0 |  8 |       10000 |              9999 |              10000
    0 | 16 |       10000 |              9999 |              10000
    0 | 32 |       10000 |              9999 |              10000
    1 |  4 |       20000 |             19998 |              20000
    1 |  8 |       20000 |             19998 |              20000
    1 | 16 |       20000 |             19998 |              20000
    1 | 32 |       20000 |             19998 |              20000
    2 |  4 |       40000 |             39996 |              40000
    2 |  8 |       40000 |             39996 |              40000
    2 | 16 |       40000 |             39996 |              40000
    2 | 32 |       40000 |             39996 |              40000
    3 |  4 |       80000 |             14603 |              40000
    3 |  8 |       80000 |             79992 |              80000
    3 | 16 |       80000 |             79992 |              80000
    3 | 32 |       80000 |             79992 |              80000
    4 |  4 |      160000 |              6704 |              40000
    4 |  8 |      160000 |             27287 |              80000
    4 | 16 |      160000 |            159984 |             160000
    4 | 32 |      160000 |            159984 |             160000
    5 |  4 |      159947 |              1544 |              20000
    5 |  8 |      159947 |              6008 |              39999
    5 | 16 |      159947 |             25760 |              79991
    5 | 32 |      159947 |            159915 |             159947
    6 |  4 |      314257 |               820 |              19720
    6 |  8 |      314257 |              3038 |              39402
    6 | 16 |      314257 |             11594 |              78726
    6 | 32 |      314257 |             50095 |             157323
    7 |  4 |      554321 |               402 |              17538
    7 |  8 |      554321 |              1477 |              35008
    7 | 16 |      554321 |              5507 |              69895
    7 | 32 |      554321 |             22492 |             139485
    8 |  4 |      810212 |               192 |              12965
    8 |  8 |      810212 |               677 |              25868
    8 | 16 |      810212 |              2616 |              51608
    8 | 32 |      810212 |             10752 |             102913
    9 |  4 |     1008025 |                87 |               8251
    9 |  8 |     1008025 |               344 |              16450
    9 | 16 |     1008025 |              1298 |              32767
    9 | 32 |     1008025 |              5303 |              65176
   10 |  4 |     1133011 |                40 |               4773
   10 |  8 |     1133011 |               175 |               9494
   10 | 16 |     1133011 |               671 |              18878
   10 | 32 |     1133011 |              2663 |              37540

PHASE D: Speculate children for top-M parents (per depth)
depth | M | child_loads_extra | next_loads_avoided | net
    0 |  4 |             20000 |              20000 |    0
    0 |  8 |             20000 |              20000 |    0
    0 | 16 |             20000 |              20000 |    0
    0 | 32 |             20000 |              20000 |    0
    1 |  4 |             40000 |              40000 |    0
    1 |  8 |             40000 |              40000 |    0
    1 | 16 |             40000 |              40000 |    0
    1 | 32 |             40000 |              40000 |    0
    2 |  4 |             80000 |              80000 |    0
    2 |  8 |             80000 |              80000 |    0
    2 | 16 |             80000 |              80000 |    0
    2 | 32 |             80000 |              80000 |    0
    3 |  4 |             80000 |              80000 |    0
    3 |  8 |            160000 |             160000 |    0
    3 | 16 |            160000 |             160000 |    0
    3 | 32 |            160000 |             160000 |    0
    4 |  4 |             40000 |              40000 |    0
    4 |  8 |             80000 |              79999 |   -1
    4 | 16 |            160000 |             159947 |  -53
    4 | 32 |            160000 |             159947 |  -53
    5 |  4 |             40000 |              39989 |  -11
    5 |  8 |             80000 |              79962 |  -38
    5 | 16 |            160000 |             159743 | -257
    5 | 32 |            319894 |             314257 | -5637
    6 |  4 |             40000 |              39840 | -160
    6 |  8 |             80000 |              79445 | -555
    6 | 16 |            160000 |             157833 | -2167
    6 | 32 |            320000 |             310359 | -9641
    7 |  4 |             40000 |              39095 | -905
    7 |  8 |             80000 |              77417 | -2583
    7 | 16 |            160000 |             152302 | -7698
    7 | 32 |            320000 |             293730 | -26270
    8 |  4 |             40000 |              37537 | -2463
    8 |  8 |             80000 |              73173 | -6827
    8 | 16 |            160000 |             143005 | -16995
    8 | 32 |            320000 |             268822 | -51178
    9 |  4 |             40000 |              35643 | -4357
    9 |  8 |             80000 |              68900 | -11100
    9 | 16 |            160000 |             129656 | -30344
    9 | 32 |            320000 |             249670 | -70330
   10 |  4 |              5000 |               5000 |    0
   10 |  8 |              5000 |               5000 |    0
   10 | 16 |              5000 |               5000 |    0
   10 | 32 |              5000 |               5000 |    0

PHASE A: Persistence for top-10 idx per depth
depth | idx:count:persist
    0 | 0:2560000:0.525
    1 | 1:1280665:0.535 2:1279335:0.535
    2 | 4:640698:0.550 5:640312:0.549 3:639967:0.549 6:639023:0.550
    3 | 12:320944:0.570 9:320634:0.571 8:320238:0.570 10:320064:0.570 7:319729:0.571 14:319602:0.570 13:319421:0.571 11:319368:0.570
    4 | 26:160650:0.597 20:160562:0.599 17:160369:0.599 25:160294:0.599 16:160129:0.599 30:160104:0.598 19:160072:0.599 22:160062:0.599 21:160002:0.598 28:159875:0.599
    5 | 54:40385:0.638 36:40318:0.635 43:40254:0.640 55:40184:0.637 31:40177:0.639 35:40169:0.639 61:40159:0.641 52:40128:0.639 47:40116:0.635 51:40116:0.638
    6 | 110:20365:0.694 73:20269:0.689 88:20268:0.694 95:20234:0.694 82:20225:0.693 124:20198:0.693 76:20195:0.693 64:20164:0.694 83:20149:0.690 106:20147:0.689
    7 | 221:10296:0.758 177:10204:0.765 190:10203:0.761 168:10193:0.759 214:10188:0.763 148:10172:0.762 154:10165:0.761 249:10160:0.762 192:10158:0.761 144:10147:0.762
    8 | 382:5165:0.827 444:5165:0.836 297:5163:0.834 400:5163:0.835 338:5157:0.844 443:5131:0.829 332:5130:0.830 502:5126:0.825 446:5121:0.830 406:5119:0.834
    9 | 1005:2633:0.908 890:2628:0.900 1002:2623:0.893 754:2622:0.889 678:2616:0.898 666:2611:0.903 772:2610:0.897 595:2608:0.896 988:2603:0.891 888:2601:0.887
   10 | 1357:1368:1.000 1428:1355:1.000 1906:1339:1.000 1077:1337:1.000 1803:1335:1.000 1782:1333:1.000 1652:1332:1.000 1334:1331:1.000 1269:1329:1.000 1071:1329:1.000
```

## Interpretation (concise)

- Depths 0..4 are extremely collision-heavy: ideal for bucketing by idx and reusing a single scalar load per unique idx.
- Depth 5 is still reasonable (U~32), but bucket sizes shrink and overhead grows.
- Depth >=6: collisions drop quickly; bucketing ROI diminishes.
- Natural order already has low unique-per-vector for shallow depths; compaction gains reduce after depth ~5.
- Persistence increases with depth but does not translate into net gains for speculative child prefetch (see Phase D).

## Decisions (data-driven)

1) Dedupe by forest_values: NO (dup_ratio_val = 0% at all depths).
2) Delta/pattern compression: NO (patterns unique, entropy ~10 bits).
3) Speculative children prefetch: NO (net negative beyond depth 3).
4) Cache-by-idx: only worthwhile for depths <=5 (K<=32). Past depth 6, hit rate collapses.
5) Bucketing depth_max: 4 (5 only if bucket loops are vectorized or otherwise cheaper).

## RECOMENDACION FINAL
- depth_max bucketing: 4 (consider 5 only with vectorized bucketing)
- cache K by idx: 16 for depths <=4; 32 for depth 5; avoid for depth >=6
- speculate children: NO; delta/value-id: NO

